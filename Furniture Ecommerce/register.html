<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register | FurniStyle</title>

    <!-- css -->
     <link rel="stylesheet" href="./assets/css/register.css">
</head>
<body>
    <!-- register.html -->
<div class="register-container">
  <form class="register-form" onsubmit="return register(event)">
    <h2>FurniStyle</h2>
    <h2>Create Account</h2>
    <p class="subtitle">Register to start shopping</p>

    <label for="reg-username">Username</label>
    <input type="text" id="reg-username" placeholder="Enter username" required>

    <label for="reg-email">Email</label>
    <input type="email" id="reg-email" placeholder="Enter email" required>

    <label for="reg-password">Password</label>
    <input type="password" id="reg-password" placeholder="Enter password" required>

    <button type="submit">Register</button>
    <div id="register-message"></div>

    <p>Already have an account? <a href="login.html">Login</a></p>
  </form>
</div>

<script>
function register(event) {
  event.preventDefault();

  const username = document.getElementById("reg-username").value.trim();
  const email = document.getElementById("reg-email").value.trim();
  const password = document.getElementById("reg-password").value.trim();
  const messageDiv = document.getElementById("register-message");

  let users = JSON.parse(localStorage.getItem("furniture_users")) || [];

  // Check if username/email already exists
  const exists = users.some(user => user.username === username || user.email === email);
  if (exists) {
    messageDiv.textContent = "Username or Email already exists!";
    messageDiv.className = "error";
    return;
  }

  // Save new user
  users.push({ username, email, password });
  localStorage.setItem("furniture_users", JSON.stringify(users));

  // Pass username to login page
  localStorage.setItem("furniture_tempUser", username);

  messageDiv.textContent = "Registration successful! Redirecting to login...";
  messageDiv.className = "success";

  setTimeout(() => {
    window.location.href = "login.html";
  }, 1500);
}
</script>

</body>
</html>